<!DOCTYPE html>
<html lang="en-us">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-133820714-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-133820714-1');
  </script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <meta name="author" content="Nur Hamim">
  
  
  <meta name="google-site-verification" content="ca-pub-1515372853161377" />
  <link rel="prev" href="https://nurhamim.net/instalasi-haproxy-menggunakan-default-repository-centos-7/" />
  <link rel="next" href="https://nurhamim.net/instalasi-magento-pada-centos-7/" />
  <link rel="canonical" href="https://nurhamim.net/compile-haproxy-2.0-pada-centos-7/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           Compile HAProxy 2.0 Pada CentOS 7 | Catatan Cah Ndeso
       
  </title>
  <meta name="title" content="Compile HAProxy 2.0 Pada CentOS 7 | Catatan Cah Ndeso">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/nurhamim.net"
    },
    "articleSection" : "posts",
    "name" : "Compile HAProxy 2.0 Pada CentOS 7",
    "headline" : "Compile HAProxy 2.0 Pada CentOS 7",
    "description" : "Pada kesempatan kali ini kami akan berbagi bagaimana cara compile HAProxy 2.0 Pada CentOS.\nKenapa harus di compile?\nKarena default repositori yang tersedia untuk HAProxy pada CentOS 7 yaitu versi 1.5. Dengan demikian bila Anda ingin menggunakan versi 2.0 Pada CentOS 7 salah satu nya cara yaitu compile.\nBerikut ini tahapan compile HAProxy 2.0 pada CentOS 7.\n Silakan akses server CentOS 7 Anda masing - masing Melakukan update gunakan perintah berikut",
    "inLanguage" : "en-us",
    "author" : "[Nur Hamim]",
    "creator" : "[Nur Hamim]",
    "publisher": "[Nur Hamim]",
    "accountablePerson" : "[Nur Hamim]",
    "copyrightHolder" : "[Nur Hamim]",
    "copyrightYear" : "2019",
    "datePublished": "2019-11-17 02:31:54 \x2b0700 \x2b07",
    "dateModified" : "2019-11-17 02:31:54 \x2b0700 \x2b07",
    "url" : "https:\/\/nurhamim.net\/compile-haproxy-2.0-pada-centos-7\/",
    "wordCount" : "745",
    "keywords" : [ "LB","Load Balancer","HAProxy", "Catatan Cah Ndeso"]
}
</script>

</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class=""></i></a>&nbsp;<a href="https://nurhamim.net">Catatan Cah Ndeso</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="https://resume.nurhamim.net" title="">Resume</a>
                
                <a class="menu-item" href="/stories/" title="">Stories</a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont terminal"></i></a>&nbsp;<a href="https://nurhamim.net">Catatan Cah Ndeso</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="https://resume.nurhamim.net" title="">Resume</a>
                
                <a class="menu-item" href="/stories/" title="">Stories</a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">Compile HAProxy 2.0 Pada CentOS 7</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="https://nurhamim.net" rel="author">[Nur Hamim]</a> with ♥ 
                <span class="post-time">
                on <time datetime=2019-11-17 itemprop="datePublished">November 17, 2019</time>
                </span>
                in
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        <a href="https://nurhamim.net/categories/load-balancer/"> Load Balancer </a>
                        
                </span>
        </div>
    </header>
    <div class="post-content">
        

        
            
        

        
        
     
          
          
          

          
          
          

          <p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://haproxy.s3-id-jkt-1.kilatstorage.id/instalasi-ha/compile-ha.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>

<p>Pada kesempatan kali ini kami akan berbagi bagaimana cara compile HAProxy 2.0 Pada CentOS.</p>

<p>Kenapa harus di compile?</p>

<p>Karena default repositori yang tersedia untuk HAProxy pada CentOS 7 yaitu versi 1.5. Dengan demikian bila Anda ingin menggunakan versi 2.0 Pada CentOS 7 salah satu nya cara yaitu compile.</p>

<p>Berikut ini tahapan compile HAProxy 2.0 pada CentOS 7.</p>

<ol>
<li>Silakan akses server CentOS 7 Anda masing - masing</li>

<li><p>Melakukan update gunakan perintah berikut</p>

<pre><code class="language-bash">[root@nur-srv-lb ~]#
[root@nur-srv-lb ~]# yum update -y
</code></pre></li>

<li><p>Instalasi dependencies yang dibutuhkan</p>

<pre><code class="language-bash">[root@nur-srv-lb ~]#
[root@nur-srv-lb ~]# yum install gcc pcre-static pcre-devel openssl-devel tar make -y
</code></pre>

<p>Silakan tunggu proses instalasinya sampai selesai</p></li>

<li><p>Unduh HAProxy 2.0 melalui link berikut: <strong><a href="http://www.haproxy.org/download/" rel="nofollow noreferrer" target="_blank">Download page</a></strong> atau Anda dapat menggunakan <strong>wget</strong> sebagai berikut</p>

<pre><code class="language-bash">[root@nur-srv-lb ~]#
[root@nur-srv-lb ~]# wget http://www.haproxy.org/download/2.0/src/haproxy-2.0.7.tar.gz -O ~/haproxy.tar.gz
--2019-11-16 19:58:09--  http://www.haproxy.org/download/2.0/src/haproxy-2.0.7.tar.gz
Resolving www.haproxy.org (www.haproxy.org)... 51.15.8.218
Connecting to www.haproxy.org (www.haproxy.org)|51.15.8.218|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 2542573 (2.4M) [application/x-tar]
Saving to: '/root/haproxy.tar.gz'

100%[=======================================================================================&gt;] 2,542,573   1.25MB/s   in 1.9s   

2019-11-16 19:58:12 (1.25 MB/s) - '/root/haproxy.tar.gz' saved [2542573/2542573]

[root@nur-srv-lb ~]#
</code></pre></li>

<li><p>Ekstrack file yang telah di unduh</p>

<pre><code class="language-bash">[root@nur-srv-lb ~]#
[root@nur-srv-lb ~]# tar xzvf ~/haproxy.tar.gz -C ~/
</code></pre></li>

<li><p>Pindah ke direktori hasil extrack</p>

<pre><code class="language-bash">[root@nur-srv-lb ~]#
[root@nur-srv-lb ~]# cd ~/haproxy-2.0.7/
[root@nur-srv-lb haproxy-2.0.7]#
</code></pre></li>

<li><p>Compile HAProxy gunakan perintah berikut</p>

<pre><code class="language-bash">[root@nur-srv-lb haproxy-2.0.7]#
[root@nur-srv-lb haproxy-2.0.7]# make TARGET=linux-glibc
CC      src/ev_poll.o
CC      src/ev_epoll.o
CC      src/namespace.o
CC      src/proto_http.o
CC      src/cfgparse-listen.o
CC      src/proto_htx.o
CC      src/stream.o
CC      src/mux_h2.o
CC      src/stats.o
CC      src/flt_spoe.o
CC      src/server.o
CC      src/checks.o
CC      src/haproxy.o
CC      src/cfgparse.o
CC      src/flt_http_comp.o
CC      src/http_fetch.o
CC      src/dns.o
CC      src/stick_table.o
CC      src/mux_h1.o
CC      src/peers.o
CC      src/standard.o
CC      src/proxy.o
CC      src/cli.o
CC      src/log.o
CC      src/backend.o
CC      src/pattern.o
CC      src/sample.o
CC      src/stream_interface.o
CC      src/proto_tcp.o
CC      src/listener.o
CC      src/h1.o
CC      src/cfgparse-global.o
CC      src/cache.o
CC      src/http_rules.o
CC      src/http_act.o
CC      src/tcp_rules.o
CC      src/filters.o
CC      src/connection.o
CC      src/session.o
CC      src/acl.o
CC      src/vars.o
CC      src/raw_sock.o
CC      src/map.o
CC      src/proto_uxst.o
CC      src/payload.o
CC      src/fd.o
CC      src/queue.o
CC      src/flt_trace.o
CC      src/task.o
CC      src/lb_chash.o
CC      src/frontend.o
CC      src/applet.o
CC      src/mux_pt.o
CC      src/signal.o
CC      src/ev_select.o
CC      src/proto_sockpair.o
CC      src/compression.o
CC      src/http_conv.o
CC      src/memory.o
CC      src/lb_fwrr.o
CC      src/channel.o
CC      src/htx.o
CC      src/uri_auth.o
CC      src/regex.o
CC      src/chunk.o
CC      src/pipe.o
CC      src/lb_fas.o
CC      src/lb_map.o
CC      src/lb_fwlc.o
CC      src/auth.o
CC      src/time.o
CC      src/hathreads.o
CC      src/http_htx.o
CC      src/buffer.o
CC      src/hpack-tbl.o
CC      src/shctx.o
CC      src/sha1.o
CC      src/http.o
CC      src/hpack-dec.o
CC      src/action.o
CC      src/proto_udp.o
CC      src/http_acl.o
CC      src/xxhash.o
CC      src/hpack-enc.o
CC      src/h2.o
CC      src/freq_ctr.o
CC      src/lru.o
CC      src/protocol.o
CC      src/arg.o
CC      src/hpack-huff.o
CC      src/hdr_idx.o
CC      src/base64.o
CC      src/hash.o
CC      src/mailers.o
CC      src/activity.o
CC      src/http_msg.o
CC      src/version.o
CC      src/mworker.o
CC      src/mworker-prog.o
CC      src/debug.o
CC      src/wdt.o
CC      src/dict.o
CC      src/xprt_handshake.o
CC      ebtree/ebtree.o
CC      ebtree/eb32sctree.o
CC      ebtree/eb32tree.o
CC      ebtree/eb64tree.o
CC      ebtree/ebmbtree.o
CC      ebtree/ebsttree.o
CC      ebtree/ebimtree.o
CC      ebtree/ebistree.o
LD      haproxy
[root@nur-srv-lb haproxy-2.0.7]# 
</code></pre></li>

<li><p>Setelah berhasil di compile silakan install HAProxy dengan cara menjalankan perintah</p>

<pre><code class="language-bash">[root@nur-srv-lb haproxy-2.0.7]#
[root@nur-srv-lb haproxy-2.0.7]# make install
'haproxy' -&gt; '/usr/local/sbin/haproxy'
'doc/haproxy.1' -&gt; '/usr/local/share/man/man1/haproxy.1'
install: creating directory '/usr/local/doc'
install: creating directory '/usr/local/doc/haproxy'
'doc/configuration.txt' -&gt; '/usr/local/doc/haproxy/configuration.txt'
'doc/management.txt' -&gt; '/usr/local/doc/haproxy/management.txt'
'doc/seamless_reload.txt' -&gt; '/usr/local/doc/haproxy/seamless_reload.txt'
'doc/architecture.txt' -&gt; '/usr/local/doc/haproxy/architecture.txt'
'doc/peers-v2.0.txt' -&gt; '/usr/local/doc/haproxy/peers-v2.0.txt'
'doc/regression-testing.txt' -&gt; '/usr/local/doc/haproxy/regression-testing.txt'
'doc/cookie-options.txt' -&gt; '/usr/local/doc/haproxy/cookie-options.txt'
'doc/lua.txt' -&gt; '/usr/local/doc/haproxy/lua.txt'
'doc/WURFL-device-detection.txt' -&gt; '/usr/local/doc/haproxy/WURFL-device-detection.txt'
'doc/proxy-protocol.txt' -&gt; '/usr/local/doc/haproxy/proxy-protocol.txt'
'doc/linux-syn-cookies.txt' -&gt; '/usr/local/doc/haproxy/linux-syn-cookies.txt'
'doc/SOCKS4.protocol.txt' -&gt; '/usr/local/doc/haproxy/SOCKS4.protocol.txt'      
'doc/network-namespaces.txt' -&gt; '/usr/local/doc/haproxy/network-namespaces.txt'
'doc/DeviceAtlas-device-detection.txt' -&gt; '/usr/local/doc/haproxy/DeviceAtlas-device-detection.txt'
'doc/51Degrees-device-detection.txt' -&gt; '/usr/local/doc/haproxy/51Degrees-device-detection.txt'    
'doc/netscaler-client-ip-insertion-protocol.txt' -&gt; '/usr/local/doc/haproxy/netscaler-client-ip-insertion-protocol.txt'
'doc/peers.txt' -&gt; '/usr/local/doc/haproxy/peers.txt'
'doc/close-options.txt' -&gt; '/usr/local/doc/haproxy/close-options.txt'
'doc/SPOE.txt' -&gt; '/usr/local/doc/haproxy/SPOE.txt'
'doc/intro.txt' -&gt; '/usr/local/doc/haproxy/intro.txt'
[root@nur-srv-lb haproxy-2.0.7]#
</code></pre></li>

<li><p>Saat ini instalasi HAProxy telah selesai dilakukan, selanjutnya melakukan konfigurasi tambahan supaya HAProxy dapat berjalan dengan sempurna. Silakan buat beberapa direktori sebagai berikut:</p>

<pre><code class="language-bash">[root@nur-srv-lb haproxy-2.0.7]# 
[root@nur-srv-lb haproxy-2.0.7]# mkdir -p /etc/haproxy
[root@nur-srv-lb haproxy-2.0.7]# mkdir -p /var/lib/haproxy
[root@nur-srv-lb haproxy-2.0.7]# mkdir -p /var/lib/haproxy/stats
[root@nur-srv-lb haproxy-2.0.7]# 
</code></pre></li>

<li><p>Membuat symlink HAProxy untuk dapat berjalan gunakan perintah</p>

<pre><code class="language-bash">[root@nur-srv-lb haproxy-2.0.7]# ln -s /usr/local/sbin/haproxy /usr/sbin/haproxy
[root@nur-srv-lb haproxy-2.0.7]# 
</code></pre></li>

<li><p>Jika Anda ingin menambahkan proxy sebagai service ke sistem, copy file haproxy.init ke direktori /etc/init.d Anda. Ubah permission file supaya script dapat dieksekusi dan kemudian muat ulang daemon systemd.</p>

<pre><code class="language-bash">[root@nur-srv-lb haproxy-2.0.7]#
[root@nur-srv-lb haproxy-2.0.7]# cp ~/haproxy-2.0.7/examples/haproxy.init /etc/init.d/haproxy
[root@nur-srv-lb haproxy-2.0.7]# chmod 755 /etc/init.d/haproxy
[root@nur-srv-lb haproxy-2.0.7]# systemctl daemon-reload
[root@nur-srv-lb haproxy-2.0.7]# 
</code></pre></li>

<li><p>Supaya HAProxy dapat aktif secara otomatis apabila server di restart jalankan perintah berikut</p>

<pre><code class="language-bash">[root@nur-srv-lb haproxy-2.0.7]# systemctl enable haproxy 
haproxy.service is not a native service, redirecting to /sbin/chkconfig.
Executing /sbin/chkconfig haproxy on
[root@nur-srv-lb haproxy-2.0.7]# 
[root@nur-srv-lb haproxy-2.0.7]# chkconfig haproxy on
[root@nur-srv-lb haproxy-2.0.7]# 
</code></pre></li>

<li><p>Membuat user haproxy</p>

<pre><code class="language-bash">[root@nur-srv-lb haproxy-2.0.7]# useradd -r haproxy 
[root@nur-srv-lb haproxy-2.0.7]# 
</code></pre></li>

<li><p>Jika ingin melihat versi HAProxy jalankan perintah</p>

<pre><code class="language-bash">[root@nur-srv-lb haproxy-2.0.7]# haproxy -v
HA-Proxy version 2.0.7 2019/09/27 - https://haproxy.org/
[root@nur-srv-lb haproxy-2.0.7]#
</code></pre></li>

<li><p>Hasil compile berbeda dengan hasil instalasi menggunakan repo, hasil compile Anda dapat membuat secara mandiri file <strong>haproxy.cfg</strong> nya. Jika Anda install menggunakan repo secara default sudah tersedia configurasi defaultnya di direktori <strong>/etc/haproxy/</strong></p></li>
</ol>

<p>Sekian panduan terkait compile HAProx 2.0 di CentOS 7.</p>

<p>Selamat belajar semoga bermanfaat.</p>

<p>See You &gt;.&lt;</p>

    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>Nur Hamim </span>
                </p>
            
              
            
              
             
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=https://nurhamim.net/compile-haproxy-2.0-pada-centos-7/>https://nurhamim.net/compile-haproxy-2.0-pada-centos-7/</span>
            </p>
            
            
    </div>

  
    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-tag"></i>Tag(s): 
            
            <span class="tag"><a href="https://nurhamim.net/tags/lb/">
                    #LB</a></span>
            
            <span class="tag"><a href="https://nurhamim.net/tags/load-balancer/">
                    #Load Balancer</a></span>
            
            <span class="tag"><a href="https://nurhamim.net/tags/haproxy/">
                    #HAProxy</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> · 
                <span><a href="https://nurhamim.net">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://nurhamim.net/instalasi-haproxy-menggunakan-default-repository-centos-7/" class="prev" rel="prev" title="Instalasi HAProxy Menggunakan Default Repository CentOS 7"><i class="iconfont icon-left"></i>&nbsp;Instalasi HAProxy Menggunakan Default Repository CentOS 7</a>
         
        
        <a href="https://nurhamim.net/instalasi-magento-pada-centos-7/" class="next" rel="next" title="Instalasi Magento Pada CentOS 7">Instalasi Magento Pada CentOS 7&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

<div class="post-comment">
    
    <div id="disqus_thread"></div>
<script type="text/javascript">
    (function () {
        
        
        if (window.location.hostname === 'localhost') return;

        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        var disqus_shortname = 'nurhamim';
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
        Disqus.</a></noscript>

    
</div>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2020 - 2020</span>
        
        <span class="with-love">
    	 <i class="iconfont terminal"></i> 
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="https://nurhamim.net">Nur Hamim</a> | </span> 
         

         
      <span>Powered by <a href="https://github.com/hamimistimewa" target="_blank" rel="external nofollow">Github</a></span>
    </div>
</footer>












    
     <link href="//lib.baomitu.com/lightgallery/1.6.11/css/lightgallery.min.css" rel="stylesheet">  
      
     <script src="/js/vendor_gallery.min.js" async="" ></script>
    
  



     </div>
  </body>
</html>
